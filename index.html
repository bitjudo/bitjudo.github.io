
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>bitJudo</title>
	<meta name="author" content="a couple of geeks">

	
	<meta name="description" content="If you haven&rsquo;t figured out by now, I&rsquo;m a big fan of both Docker and SaltStack. I&rsquo;ve been using them both separately for a while &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="bitJudo" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">bitJudo</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="https://www.google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:bitjudo.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/bitjudo" title="Twitter">Twitter</a>
		
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
    
	</div>
	<form class="search" action="https://www.google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:bitjudo.com">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2014/05/13/partial-continuous-deployment-with-docker-and-saltstack/">
		
			Partial Continuous Deployment With Docker and SaltStack</a>
	</h2>
	<div class="entry-content">
		<p>If you haven&rsquo;t figured out by now, I&rsquo;m a big fan of both <a href="http://www.docker.io">Docker</a> and <a href="http://www.saltstack.com">SaltStack</a>. I&rsquo;ve been using them both separately for a while now, but recently started using them together. Here&rsquo;s my first iteration of continuous deployment using Docker and SaltStack.</p>

<p>This article will show you how to use <code>SaltStack</code> to re-deploy a container when a new version becomes available. I&rsquo;ve made a few assumptions: (1) you know what Docker and SaltStack are, (2) you understand what a SaltStack State is, and (3) that you will use a docker index/registry to pull in your docker images (check out my <a href="https://github.com/ekristen/docker-index">docker-index</a> project).</p>

<p>This post will break down the state file to explain each step, so even if you are not a Salt guru it should generally make sense. I won&rsquo;t cover building docker images or how to trigger SaltStack to run the state file. (That might come in a future article.)</p>


		
		<a href="/blog/2014/05/13/partial-continuous-deployment-with-docker-and-saltstack/" class="more-link">Read on &rarr;</a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2014-05-13T21:10:57-04:00" pubdate data-updated="true">May 13<span>th</span>, 2014</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/devops/'>devops</a>, <a class='category' href='/blog/categories/docker/'>docker</a>, <a class='category' href='/blog/categories/saltstack/'>saltstack</a>

</div>
  <div class="author">
  

<span class="byline author vcard">Posted by <span class="fn">Erik Kristensen</span></span>
</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2014/05/07/docker-scripts-updated/">
		
			Docker Scripts - Updated</a>
	</h2>
	<div class="entry-content">
		<p>In a follow up to the original post <a href="">Docker Scripts</a>, Docker has made it so that you no longer need to have <code>jq</code> installed, you can do everything with the <code>docker</code> client&rsquo;s inspect command and its (semi)new format feature.</p>

<p>I&rsquo;ve updated the scripts to use the format command.</p>


		
		<a href="/blog/2014/05/07/docker-scripts-updated/" class="more-link">Read on &rarr;</a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2014-05-07T21:35:28-04:00" pubdate data-updated="true">May 7<span>th</span>, 2014</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/devops/'>devops</a>, <a class='category' href='/blog/categories/docker/'>docker</a>, <a class='category' href='/blog/categories/scripts/'>scripts</a>

</div>
  <div class="author">
  

<span class="byline author vcard">Posted by <span class="fn">Erik Kristensen</span></span>
</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2014/04/24/analyzing-an-android-app-with-docker-and-androguard/">
		
			Analyzing an Android App With Docker and Androguard</a>
	</h2>
	<div class="entry-content">
		<h1>TL;DR</h1>

<p>Have you wanted to get into analyzing Android apps&mdash;for vulnerabilities,
malware, or just for fun? Maybe you&rsquo;ve experienced problems getting an
environment setup because of complex tool dependencies, long READMEs, or just
never really knew where to get started? This article can help. Using docker I
can show you how to tear apart your first Android application, and maybe even
find some vulnerabilities while you&rsquo;re at it.</p>


		
		<a href="/blog/2014/04/24/analyzing-an-android-app-with-docker-and-androguard/" class="more-link">Read on &rarr;</a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2014-04-24T19:48:05-04:00" pubdate data-updated="true">Apr 24<span>th</span>, 2014</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/analysis/'>analysis</a>, <a class='category' href='/blog/categories/androguard/'>androguard</a>, <a class='category' href='/blog/categories/android/'>android</a>, <a class='category' href='/blog/categories/docker/'>docker</a>, <a class='category' href='/blog/categories/vulnerabilities/'>vulnerabilities</a>

</div>
  <div class="author">
  

<span class="byline author vcard">Posted by <span class="fn">David Weinstein</span></span>
</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2014/03/19/just-in-time-encryption-keys-using-saltstack/">
		
			Just in Time Encryption Keys Using SaltStack</a>
	</h2>
	<div class="entry-content">
		<p>Recently, I was challenged with ensuring the encryption of all data at rest for several servers.  Unlike laptops or desktops, server nodes need to be able to come up and down in response to various requests. When spinning up multiple nodes you definitely don’t want them waiting for human interaction. Enter SaltStack and LUKS volumes. The real challenge was how to provide full disk encryption without storing the encryption key itself on the server.</p>

<p>Since these were Linux servers, LUKS encryption made the most sense. In essence what this tutorial describes is a way to provide “just in time” delivery of disk encryption keys. This is done using SaltStack features.</p>

<p>The rest of this article is a TL;DR combined with a tutorial of sorts to help you set this up.</p>

<h1>TL;DR</h1>

<p>By taking advantage of a couple features that <a href="http://www.saltstack.com/">SaltStack</a> brings to the table, it is possible to automate the mounting of your LUKS volumes after the server has started. The salt minion has the ability to run certain states (scripts) upon start.  This allows the user to run a LUKS state that will verify the existence of the volume, unlock it, and mount it. Using salt states also allows the user to build state dependencies, or trigger other states to run.  These features ensure that any services requiring the encrypted volume only start after the volume is available.</p>


		
		<a href="/blog/2014/03/19/just-in-time-encryption-keys-using-saltstack/" class="more-link">Read on &rarr;</a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2014-03-19T11:15:00-04:00" pubdate data-updated="true">Mar 19<span>th</span>, 2014</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/devops/'>devops</a>, <a class='category' href='/blog/categories/encryption/'>encryption</a>, <a class='category' href='/blog/categories/longread/'>longread</a>, <a class='category' href='/blog/categories/luks/'>luks</a>, <a class='category' href='/blog/categories/saltstack/'>saltstack</a>, <a class='category' href='/blog/categories/tutorial/'>tutorial</a>

</div>
  <div class="author">
  

<span class="byline author vcard">Posted by <span class="fn">Erik Kristensen</span></span>
</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2014/03/13/building-efficient-dockerfiles-node-dot-js/">
		
			Building Efficient Dockerfiles - Node.js</a>
	</h2>
	<div class="entry-content">
		<h1>TL;DR</h1>

<p>Use the following code snippet (or a variation) after all your app dependencies
but before you ADD your app code to the container&hellip; this way you don&rsquo;t rebuild
your modules each time you re-build your container. If your <code>package.json</code> file
changes then your modules will be rebuilt. See this
<a href="https://gist.github.com/dweinstein/9550188">gist</a> for a full example.</p>

<figure class='code'><figcaption><span>Add this to your Dockerfile, after your deps, but before your app code.</span><a href='https://gist.github.com/dweinstein/9468644'>gist </a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>ADD package.json /tmp/package.json
</span><span class='line'>RUN cd /tmp &amp;&amp; npm install
</span><span class='line'>RUN mkdir -p /opt/app &amp;&amp; cp -a /tmp/node_modules /opt/app/
</span></code></pre></td></tr></table></div></figure>


<h1>Using cached layers for modules</h1>

<p>This article is about making efficient use of docker layers. As a side effect
we&rsquo;ll see how to reduce development and debugging time for Node.js applications
hosted in Docker containers. As you migrate from developing everything on your
development host system to Docker, there are some growing pains&hellip; mainly
arround interactive modify-and-test workflows.</p>


		
		<a href="/blog/2014/03/13/building-efficient-dockerfiles-node-dot-js/" class="more-link">Read on &rarr;</a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2014-03-13T09:34:02-04:00" pubdate data-updated="true">Mar 13<span>th</span>, 2014</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/docker/'>docker</a>, <a class='category' href='/blog/categories/dockerfiles/'>dockerfiles</a>, <a class='category' href='/blog/categories/nodejs/'>nodejs</a>

</div>
  <div class="author">
  

<span class="byline author vcard">Posted by <span class="fn">David Weinstein</span></span>
</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2014/03/12/authentication-for-a-docker-registry/">
		
			Authentication for a Docker Registry</a>
	</h2>
	<div class="entry-content">
		<p>Docker is an amazing tool that has only been around for a short while, but has taken the DevOps world by storm, and organizations from small to large are starting to use it from integration testing, to dynamically scaling an application&rsquo;s environment.</p>

<p>Docker released an open-source registry that allows you to remote store images you create with docker, but what the did not release is an open-source index. The index is arguably (depending on your use case) the most important part, it handles the authentication layer of a registry. A registry can be used without and index, and if you are just wanting a place to store your images and you don&rsquo;t want to worry about who can access them, then no need to read on.</p>


		
		<a href="/blog/2014/03/12/authentication-for-a-docker-registry/" class="more-link">Read on &rarr;</a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2014-03-12T10:48:18-04:00" pubdate data-updated="true">Mar 12<span>th</span>, 2014</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/docker/'>docker</a>

</div>
  <div class="author">
  

<span class="byline author vcard">Posted by <span class="fn">Erik Kristensen</span></span>
</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2014/03/11/docker-scripts/">
		
			Docker Scripts</a>
	</h2>
	<div class="entry-content">
		<p>David (the other author on this blog) and I have been doing a lot of work with docker with respect to our daily jobs. We ended up needed to orchestrate the management of multiple docker containers. This was before we discovered projects like <a href="https://github.com/toscanini/maestro">maestro</a> and <a href="https://github.com/signalfuse/maestro-ng">maetro-ng</a>. David found an awesome command line for parsing json called <a href="http://stedolan.github.io/jq/">jq</a> and put it to use by creating a bash one liner to grab a container&rsquo;s IP address.</p>


		
		<a href="/blog/2014/03/11/docker-scripts/" class="more-link">Read on &rarr;</a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2014-03-11T19:37:06-04:00" pubdate data-updated="true">Mar 11<span>th</span>, 2014</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/devops/'>devops</a>, <a class='category' href='/blog/categories/docker/'>docker</a>, <a class='category' href='/blog/categories/scripts/'>scripts</a>

</div>
  <div class="author">
  

<span class="byline author vcard">Posted by <span class="fn">Erik Kristensen</span></span>
</div>
	
</div>
</article>

<nav id="pagenavi">
    
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner">Copyright &copy; 2014

    a couple of geeks

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'bitjudo';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//go.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-48897339-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>